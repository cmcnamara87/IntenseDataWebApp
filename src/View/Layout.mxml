<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
		 xmlns:s="library://ns.adobe.com/flex/spark" 
		 xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%" xmlns:View="View.*"
		 xmlns:Notification="View.components.Notification.*"
		 xmlns:Component="View.components.*" xmlns:components="View.ERA.components.*">

	<fx:Script>
		<![CDATA[
			import Controller.Utilities.Auth;
			
			import Model.Model_ERANotification;
			
			import mx.controls.Text;
			public function addNotifications(notificationsArray:Array):void {
				notificationList.removeAllElements();
				for each(var notificationData:Model_ERANotification in notificationsArray) {
					//if(notificationData.username == Auth.getInstance().getUsername()) return;
					
					var notification:Text = new Text();
					notification.percentWidth = 100;
					if(notificationData.type == Model_ERANotification.FILE_UPLOADED) {
						var fileURL:String = "#file/" + notificationData.eraCase.base_asset_id + "/" + escape(notificationData.eraCase.rmCode) + "/" + notificationData.room.roomType + "/" + notificationData.room.base_asset_id + "/"  + notificationData.file.base_asset_id;
						var roomURL:String = "#case/" + notificationData.eraCase.base_asset_id + "/" + notificationData.room.roomType;

						notification.htmlText = "RM " + notificationData.eraCase.rmCode + " - <b>" + notificationData.fullName + "</b> uploaded <font color='#0000FF'><a href='" + fileURL + "'>" + notificationData.file.title + "</a></font> to <font color='#0000FF'><a href='" + roomURL + "'>" + notificationData.room.roomTitle + "</a></font>.";
						notificationList.addElement(notification);
						
					} else if (notificationData.type == Model_ERANotification.ROOM_COMMENT) {
						var roomURL:String = "#case/" + notificationData.eraCase.base_asset_id + "/" + notificationData.room.roomType;
						notification.htmlText = "RM " + notificationData.eraCase.rmCode + " - <b>" + notificationData.fullName + "</b> wrote \"" + notificationData.comment_room.text + "\" on <font color='#0000FF'><a href='" + roomURL + "'>" + notificationData.room.roomTitle + "</a></font>.";
						
						notificationList.addElement(notification);
					} else if (notificationData.type == Model_ERANotification.FILE_MOVED_TO_SCREENING_LAB) {
						var fileURL:String = "#file/" + notificationData.eraCase.base_asset_id + "/" + escape(notificationData.eraCase.rmCode) + "/" + notificationData.room.roomType + "/" + notificationData.room.base_asset_id + "/"  + notificationData.file.base_asset_id;
						notification.htmlText = "RM " + notificationData.eraCase.rmCode + " - <b>" + notificationData.fullName + "</b> moved <a href='" + fileURL + "'>" + notificationData.file.title + "</a></font> to <font color='#0000FF'><a href='" + roomURL + "'>" + notificationData.room.roomTitle + "</a></font>.";
						
						notificationList.addElement(notification);
					} else if (notificationData.type == Model_ERANotification.FILE_COMMENT) {
						var fileURL:String = "#file/" + notificationData.eraCase.base_asset_id + "/" + escape(notificationData.eraCase.rmCode) + "/" + notificationData.room.roomType + "/" + notificationData.room.base_asset_id + "/"  + notificationData.file.base_asset_id;
						var roomURL:String = "#case/" + notificationData.eraCase.base_asset_id + "/" + notificationData.room.roomType;
						notification.htmlText = "RM " + notificationData.eraCase.rmCode + " - <b>" + notificationData.fullName + "</b> wrote \"" + notificationData.comment_file.annotation_text + "\" on <font color='#0000FF'><a href='" + fileURL + "'>" + notificationData.file.title + "</a></font> in <font color='#0000FF'><a href='" + roomURL + "'>" + notificationData.room.roomTitle + "</a></font>.";
						
						notificationList.addElement(notification);
					}
				
				}
			}
		]]>
	</fx:Script>

	<!-- Header -->
	<s:VGroup width="100%" height="100%" gap="0">
		<View:Header id="header" visible="false" includeInLayout="false"></View:Header>
		<components:NotificationBar id="notificationBar">
		</components:NotificationBar>
		<!-- Controller View Area -->
		<!--<s:Group id="content" top="{header.height+40}" left="40" right="40" bottom="40"></s:Group>-->
		<!--<s:Group id="content" top="{header.height}" width="100%" height="100%"></s:Group>-->
		<s:Group id="content" width="100%" height="100%"></s:Group>
	</s:VGroup> 
	
	<s:BorderContainer backgroundColor="0xFFFFFF"
					   id="notificationPanel"
					   top="{header.height + 10}"
					   right="20"
					   width="300" visible="false">
		<s:VGroup id="notificationList" width="100%" paddingBottom="10" paddingLeft="10" paddingRight="10" paddingTop="10">
			
		</s:VGroup>
	</s:BorderContainer>
	
	<!--<Notification:NotificationPanel
		id="notificationPanel"
		visible="false"
		includeInLayout="false"
		top="{header.height + 10}"
		right="0">
	</Notification:NotificationPanel>-->
</s:Group>