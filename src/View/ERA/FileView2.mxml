<?xml version="1.0" encoding="utf-8"?>
<s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
		  xmlns:s="library://ns.adobe.com/flex/spark" 
		  xmlns:mx="library://ns.adobe.com/flex/mx" width="100%" height="100%">
	<fx:Script>
		<![CDATA[
			import org.osmf.events.MediaPlayerStateChangeEvent;
			import org.osmf.events.TimeEvent;

			private var videoDuration:Number = 0;
			
			protected function videoPlayer_mediaPlayerStateChangeHandler(event:MediaPlayerStateChangeEvent):void
			{
				trace(event.state);
			}


			protected function videoPlayer_currentTimeChangeHandler(event:TimeEvent):void
			{
				trace("blah", event.time, videoDuration);
				playhead.left = scrubbar.width * event.time / videoDuration;
			}


			protected function playButton_clickHandler(event:MouseEvent):void
			{
				if(videoPlayer.playing) {
					videoPlayer.pause();
				} else {
					videoPlayer.play();
				}
			}


			protected function videoPlayer_durationChangeHandler(event:TimeEvent):void
			{
				trace("duration is", event.time)
				videoDuration = event.time;
			}


			protected function scrubbar_clickHandler(event:MouseEvent):void
			{
				// TODO Auto-generated method stub
				videoPlayer.seek(videoPlayer.duration * 	event.localX /  scrubbar.width)
			
			}

		]]>
	</fx:Script>
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	
	<!-- TITLE BAR WITH CREATION BUTTON -->
	<s:BorderContainer width="100%" backgroundColor="0xe4e5e6" height="80" borderVisible="false">
		<s:HGroup verticalAlign="middle" height="100%" width="100%" paddingLeft="20" paddingRight="20">
			<s:Button id="backButton" label="Back" cornerRadius="10" chromeColor="0xFFFFFF" />
			<s:VGroup width="100%" paddingTop="10">
				
				<s:Label text="Video View" fontSize="30" fontWeight="bold" color="0x5e6469" height="40" width="100%">
					<!--<s:filters>
					<s:DropShadowFilter distance="2" angle="90" color="0xFFFFFF" blurX="0" blurY="0"/>
					</s:filters>-->
				</s:Label>
				
			</s:VGroup>
			<!--<s:Button id="makeNewCase" label="Create New Case" cornerRadius="10" height="30" click="makeNewCase_clickHandler(event)"/>-->
		</s:HGroup>
	</s:BorderContainer>
	<!-- END OF TITLE BAR WITH CREATION BUTTON -->
	
	<s:VideoDisplay id="videoPlayer" width="100%" height="100%" autoDisplayFirstFrame="true" scaleMode="none"  durationChange="videoPlayer_durationChangeHandler(event)" source="http://123.100.147.12/Media/1230_1.f4v" currentTimeChange="videoPlayer_currentTimeChangeHandler(event)" mediaPlayerStateChange="videoPlayer_mediaPlayerStateChangeHandler(event)" />
	<s:HGroup width="100%">
		<s:Button label="Play" id="playButton" click="playButton_clickHandler(event)"/>
		<s:BorderContainer id="scrubbar" height="30" width="100%" backgroundColor="0x00FF00" click="scrubbar_clickHandler(event)">
			<s:BorderContainer id="playhead" height="30" width="1" borderVisible="false" backgroundColor="0xFFFF00" />
		</s:BorderContainer>
	</s:HGroup>
</s:VGroup>
